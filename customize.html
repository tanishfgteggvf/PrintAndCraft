<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Studio | Print Craft</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f8f8; color: #1a1a1a; scroll-behavior: smooth; }
        .glass-panel { background: white; border-radius: 3rem; border: 1px solid #f0f0f0; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.08); }
        .step-tag { background: #ff6b00; padding: 4px 12px; border-radius: 99px; font-size: 11px; font-weight: 900; color: white; text-transform: uppercase; }
        .active-prod { border-color: #ff6b00 !important; background-color: #fff7ed !important; color: #ff6b00 !important; }
        .warning-active { background-color: #ff6b00; color: white; transform: scale(1.02); }
        .warning-inactive { background-color: #f3f4f6; color: #9ca3af; opacity: 0.5; }
        #drop-area { border: 3px dashed #e5e7eb; transition: all 0.3s ease; cursor: pointer; }
        #drop-area.highlight { border-color: #ff6b00; background-color: #fff7ed; }
        .preview-thumb { width: 70px; height: 70px; object-fit: cover; border-radius: 12px; border: 2px solid #ff6b00; }
    </style>
</head>
<body class="min-h-screen py-10 px-4">

    <div class="max-w-2xl mx-auto">
        <div class="glass-panel p-8 md:p-12" id="studioPanel">
            <h1 class="text-5xl font-black tracking-tighter mb-10 uppercase leading-none">Design <br><span class="text-[#ff6b00]">Studio.</span></h1>
            
            <div class="space-y-12">
                <div class="space-y-6">
                    <div class="flex items-center gap-3"><span class="step-tag">Step 01</span><label class="font-black uppercase text-xs tracking-widest">Select Product</label></div>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="setProduct('T-Shirt')" id="prodTshirt" class="active-prod p-6 border-4 border-gray-100 rounded-[2rem] font-black uppercase text-xs transition-all flex flex-col items-center"><i class="fas fa-tshirt text-2xl mb-2"></i>T-Shirt</button>
                        <button onclick="setProduct('Mug')" id="prodMug" class="p-6 border-4 border-gray-100 bg-white rounded-[2rem] font-black uppercase text-xs transition-all flex flex-col items-center"><i class="fas fa-mug-hot text-2xl mb-2"></i>Custom Mug</button>
                    </div>
                </div>

                <div id="tshirtSection" class="space-y-12">
                    <div class="space-y-6">
                        <div class="flex items-center gap-3"><span class="step-tag">Step 02</span><label class="font-black uppercase text-xs tracking-widest">Material</label></div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-3">
                                <button onclick="setMaterial('Cotton')" id="btnCotton" class="w-full py-5 rounded-3xl font-black uppercase text-xs border-2 border-[#ff6b00] bg-white">Cotton</button>
                                <div id="warnCotton" class="warning-active p-5 rounded-2xl text-center"><span class="font-black text-[11px] block leading-tight">DTF MONO ONLY</span></div>
                            </div>
                            <div class="space-y-3">
                                <button onclick="setMaterial('Jersey')" id="btnJersey" class="w-full py-5 rounded-3xl font-black uppercase text-xs border-2 border-gray-100 text-gray-400">Jersey</button>
                                <div id="warnJersey" class="warning-inactive p-5 rounded-2xl text-center"><span class="font-black text-[11px] block leading-tight">PHOTO PRINTS ONLY</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="mugSection" class="space-y-8 hidden">
                    <div class="space-y-6">
                        <div class="flex items-center gap-3"><span class="step-tag">Step 02</span><label class="font-black uppercase text-xs tracking-widest">Mug Style</label></div>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="setMugType('Normal')" id="btnNormal" class="p-5 border-4 rounded-[1.5rem] font-black uppercase text-[10px] active-prod">Normal White</button>
                            <button onclick="setMugType('Magical')" id="btnMagical" class="p-5 border-4 rounded-[1.5rem] font-black uppercase text-[10px] border-gray-100">Magical Mug</button>
                        </div>
                    </div>
                    <div id="handleSelectionArea" class="space-y-6 pt-4 border-t border-gray-100 hidden">
                        <div class="flex items-center gap-3"><span class="step-tag">Step 03</span><label class="font-black uppercase text-xs tracking-widest">Handle</label></div>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="setHandle('Normal')" id="btnHandleNormal" class="p-5 border-4 rounded-[1.5rem] font-black uppercase text-[10px] active-prod">Normal</button>
                            <button onclick="setHandle('Heart')" id="btnHandleHeart" class="p-5 border-4 rounded-[1.5rem] font-black uppercase text-[10px] border-gray-100">Heart</button>
                        </div>
                    </div>
                </div>

                <div class="space-y-6 pt-6 border-t border-gray-100">
                    <div class="flex items-center gap-3"><span class="step-tag">Upload</span><label class="font-black uppercase text-xs tracking-widest">Add Designs</label></div>
                    <div id="drop-area" class="rounded-[2.5rem] p-10 text-center bg-gray-50" onclick="document.getElementById('fileInput').click()">
                        <input type="file" id="fileInput" multiple accept="image/*" class="hidden" onchange="handleFiles(this.files)">
                        <i class="fas fa-cloud-upload-alt text-5xl text-gray-300 mb-4"></i>
                        <p class="font-black uppercase text-sm">Drag & Drop Multiple Photos</p>
                        <div id="previewGallery" class="flex flex-wrap gap-3 justify-center mt-6"></div>
                    </div>
                </div>

                <div class="space-y-4 pt-6">
                    <input type="text" id="custName" placeholder="Full Name *" class="w-full bg-gray-50 rounded-2xl p-5 font-bold outline-none ring-1 ring-gray-200 focus:ring-[#ff6b00]">
                    <input type="tel" id="custPhone" placeholder="Mobile Number *" class="w-full bg-gray-50 rounded-2xl p-5 font-bold outline-none ring-1 ring-gray-200 focus:ring-[#ff6b00]">
                    <textarea id="custNotes" placeholder="Special requirements..." class="w-full bg-gray-50 border-none rounded-[2rem] p-6 h-32 font-bold outline-none ring-1 ring-gray-200 focus:ring-[#ff6b00]"></textarea>
                    
                    <button onclick="sendOrder()" id="submitBtn" class="w-full bg-[#ff6b00] text-white py-6 rounded-[2.5rem] font-black text-lg uppercase shadow-xl hover:bg-black transition-all">Place Order</button>
                    <p id="statusTxt" class="text-center text-[10px] font-black uppercase text-gray-400 mt-2"></p>
                </div>
            </div>
        </div>

        <div id="successPanel" class="hidden glass-panel p-20 text-center">
            <i class="fas fa-check-circle text-6xl text-green-500 mb-6"></i>
            <h2 class="text-3xl font-black uppercase">Order Received!</h2>
        </div>
    </div>

    <script>
        let productType = 'T-Shirt', materialType = 'Cotton', mugType = 'Normal', handleType = 'Normal', selectedFiles = [];

        function setProduct(p) {
            productType = p;
            document.getElementById('tshirtSection').classList.toggle('hidden', p !== 'T-Shirt');
            document.getElementById('mugSection').classList.toggle('hidden', p !== 'Mug');
            document.getElementById('prodTshirt').className = p === 'T-Shirt' ? 'active-prod p-6 border-4 border-gray-100 rounded-[2rem] font-black uppercase text-xs transition-all flex flex-col items-center' : 'p-6 border-4 border-gray-100 bg-white rounded-[2rem] font-black uppercase text-xs transition-all flex flex-col items-center';
            document.getElementById('prodMug').className = p === 'Mug' ? 'active-prod p-6 border-4 border-gray-100 rounded-[2rem] font-black uppercase text-xs transition-all flex flex-col items-center' : 'p-6 border-4 border-gray-100 bg-white rounded-[2rem] font-black uppercase text-xs transition-all flex flex-col items-center';
        }

        function setMaterial(m) {
            materialType = m;
            document.getElementById('btnCotton').classList.toggle('active-prod', m === 'Cotton');
            document.getElementById('btnJersey').classList.toggle('active-prod', m === 'Jersey');
        }

        function setMugType(t) {
            mugType = t;
            document.getElementById('handleSelectionArea').classList.toggle('hidden', t !== 'Magical');
        }

        function setHandle(h) { handleType = h; }

        function handleFiles(files) {
            selectedFiles = [...files];
            const gallery = document.getElementById('previewGallery');
            gallery.innerHTML = '';
            selectedFiles.forEach(file => {
                const reader = new FileReader();
                reader.onloadend = () => {
                    const img = document.createElement('img');
                    img.src = reader.result;
                    img.className = 'preview-thumb';
                    gallery.appendChild(img);
                };
                reader.readAsDataURL(file);
            });
        }

        async function sendOrder() {
            const name = document.getElementById('custName').value;
            const phone = document.getElementById('custPhone').value;
            if(!name || !phone || selectedFiles.length === 0) return alert("Missing Name, Phone or Photos!");

            const btn = document.getElementById('submitBtn');
            btn.disabled = true; btn.innerText = "UPLOADING...";

            let imagesArray = [];
            for (let file of selectedFiles) {
                const base64 = await new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onload = () => resolve(reader.result.split(',')[1]);
                    reader.readAsDataURL(file);
                });
                imagesArray.push({ name: file.name, data: base64 });
            }

            const detail = productType === 'T-Shirt' ? `Material: ${materialType}` : `Type: ${mugType} | Handle: ${handleType}`;
            
            // USE YOUR LATEST DEPLOYMENT URL
            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwlbk-H2Drqq4fDQHMcDo5c6f0C6IZpkKDJw19SptTcHSNOq_x8i6Z1HNQL-Hs8-Tqx/exec";

            fetch(SCRIPT_URL, {
                method: "POST",
                mode: "no-cors",
                body: JSON.stringify({
                    name: name,
                    phone: phone,
                    product: productType,
                    details: detail,
                    notes: document.getElementById('custNotes').value,
                    images: imagesArray
                })
            }).then(() => {
                document.getElementById('studioPanel').classList.add('hidden');
                document.getElementById('successPanel').classList.remove('hidden');
            });
        }
    </script>
</body>
</html>
