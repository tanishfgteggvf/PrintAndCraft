<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Studio | Print Craft</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f8f8; color: #1a1a1a; scroll-behavior: smooth; }
        .glass-panel { background: white; border-radius: 3rem; border: 1px solid #f0f0f0; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.08); }
        .step-tag { background: #ff6b00; padding: 4px 12px; border-radius: 99px; font-size: 11px; font-weight: 900; color: white; text-transform: uppercase; }
        
        /* BIG WARNING BOXES */
        .warning-active { background-color: #ff6b00; color: white; transform: scale(1.02); box-shadow: 0 10px 20px -5px rgba(255, 107, 0, 0.4); }
        .warning-inactive { background-color: #f3f4f6; color: #9ca3af; opacity: 0.5; }

        /* DRAG & DROP AREA */
        #drop-area { border: 3px dashed #e5e7eb; transition: all 0.3s ease; cursor: pointer; }
        #drop-area.highlight { border-color: #ff6b00; background-color: #fff7ed; }
        .preview-thumb { width: 70px; height: 70px; object-fit: cover; border-radius: 12px; border: 2px solid #ff6b00; }
    </style>
</head>
<body class="min-h-screen py-10 px-4">

    <div class="max-w-2xl mx-auto">
        <div class="glass-panel p-8 md:p-12" id="studioPanel">
            <h1 class="text-5xl font-black tracking-tighter mb-10 uppercase leading-none">Design <br><span class="text-[#ff6b00]">Studio.</span></h1>
            
            <div class="space-y-12">
                <div class="space-y-6">
                    <div class="flex items-center gap-3"><span class="step-tag">Step 02</span><label class="font-black uppercase text-xs tracking-widest">Select Material</label></div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-3">
                            <button onclick="setMaterial('Cotton')" id="btnCotton" class="w-full py-5 rounded-3xl font-black uppercase text-xs border-2 border-[#ff6b00] bg-white">Cotton</button>
                            <div id="warnCotton" class="warning-active p-5 rounded-2xl text-center transition-all">
                                <i class="fas fa-exclamation-circle block text-2xl mb-1"></i>
                                <span class="font-black text-[11px] block leading-tight">DTF MONO<br>COLOUR ONLY</span>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <button onclick="setMaterial('Jersey')" id="btnJersey" class="w-full py-5 rounded-3xl font-black uppercase text-xs border-2 border-gray-100 text-gray-400">Jersey</button>
                            <div id="warnJersey" class="warning-inactive p-5 rounded-2xl text-center transition-all">
                                <i class="fas fa-camera block text-2xl mb-1"></i>
                                <span class="font-black text-[11px] block leading-tight">PHOTO PRINTS<br>ONLY</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-6 pt-6 border-t border-gray-100">
                    <div class="flex items-center gap-3"><span class="step-tag">Upload</span><label class="font-black uppercase text-xs tracking-widest">Designs (Multiple)</label></div>
                    
                    <div id="drop-area" class="rounded-[2.5rem] p-10 text-center bg-gray-50" onclick="document.getElementById('fileInput').click()">
                        <input type="file" id="fileInput" multiple accept="image/*" class="hidden" onchange="handleFiles(this.files)">
                        <i class="fas fa-cloud-upload-alt text-5xl text-gray-300 mb-4"></i>
                        <p class="font-black uppercase text-sm tracking-widest">Drag & Drop Photos</p>
                        <p class="text-[10px] text-gray-400 font-bold mt-2 uppercase">or click to select multiple files</p>
                        
                        <div id="previewGallery" class="flex flex-wrap gap-3 justify-center mt-6"></div>
                    </div>
                </div>

                <div class="space-y-4 pt-6">
                    <div class="flex items-center gap-3 mb-2"><span class="step-tag">Final</span><label class="font-black uppercase text-xs tracking-widest">Order Details</label></div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="custName" placeholder="Full Name *" required class="w-full bg-gray-50 rounded-2xl p-5 font-bold outline-none ring-1 ring-gray-200 focus:ring-[#ff6b00]">
                        <input type="tel" id="custPhone" placeholder="Mobile Number *" required class="w-full bg-gray-50 rounded-2xl p-5 font-bold outline-none ring-1 ring-gray-200 focus:ring-[#ff6b00]">
                    </div>

                    <textarea id="custNeeds" placeholder="Any special requirements or custom messages for your order?" class="w-full bg-gray-50 border-none rounded-[2rem] p-6 h-32 font-bold outline-none ring-1 ring-gray-200 focus:ring-[#ff6b00]"></textarea>
                    
                    <button onclick="sendOrder()" id="submitBtn" class="w-full bg-[#ff6b00] text-white py-6 rounded-[2.5rem] font-black text-lg uppercase shadow-xl hover:bg-black transition-all mt-4">
                        Confirm & Place Order
                    </button>
                    <p id="statusTxt" class="text-center text-[10px] font-black uppercase text-gray-400 mt-2"></p>
                </div>
            </div>
        </div>

        <div id="successPanel" class="hidden glass-panel p-20 text-center">
            <div class="w-24 h-24 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-check text-4xl"></i>
            </div>
            <h2 class="text-3xl font-black uppercase text-[#ff6b00]">Order Received!</h2>
            <p class="text-gray-500 font-bold mt-4">Your order and designs are being processed. <br>We'll reach out to you shortly.</p>
        </div>
    </div>

    <script>
        let currentMaterial = 'Cotton';
        let selectedFiles = [];

        function setMaterial(m) {
            currentMaterial = m;
            const isCotton = m === 'Cotton';
            document.getElementById('btnCotton').className = isCotton ? 'w-full py-5 rounded-3xl font-black uppercase text-xs border-2 border-[#ff6b00] bg-white' : 'w-full py-5 rounded-3xl font-black uppercase text-xs border-2 border-gray-100 text-gray-400';
            document.getElementById('btnJersey').className = !isCotton ? 'w-full py-5 rounded-3xl font-black uppercase text-xs border-2 border-[#ff6b00] bg-white' : 'w-full py-5 rounded-3xl font-black uppercase text-xs border-2 border-gray-100 text-gray-400';
            
            document.getElementById('warnCotton').className = isCotton ? 'warning-active p-5 rounded-2xl text-center transition-all' : 'warning-inactive p-5 rounded-2xl text-center transition-all';
            document.getElementById('warnJersey').className = !isCotton ? 'warning-active p-5 rounded-2xl text-center transition-all' : 'warning-inactive p-5 rounded-2xl text-center transition-all';
        }

        const dropArea = document.getElementById('drop-area');
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => {
            dropArea.addEventListener(e, (ev) => { ev.preventDefault(); ev.stopPropagation(); }, false);
        });
        ['dragenter', 'dragover'].forEach(e => {
            dropArea.addEventListener(e, () => dropArea.classList.add('highlight'), false);
        });
        ['dragleave', 'drop'].forEach(e => {
            dropArea.addEventListener(e, () => dropArea.classList.remove('highlight'), false);
        });
        dropArea.addEventListener('drop', (e) => handleFiles(e.dataTransfer.files), false);

        function handleFiles(files) {
            selectedFiles = [...files];
            const gallery = document.getElementById('previewGallery');
            gallery.innerHTML = '';
            selectedFiles.forEach(file => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onloadend = () => {
                    const img = document.createElement('img');
                    img.src = reader.result;
                    img.className = 'preview-thumb';
                    gallery.appendChild(img);
                };
            });
        }

        async function sendOrder() {
            const name = document.getElementById('custName').value;
            const phone = document.getElementById('custPhone').value;
            const notes = document.getElementById('custNeeds').value;
            const btn = document.getElementById('submitBtn');
            const status = document.getElementById('statusTxt');

            if (!name || !phone || selectedFiles.length === 0) {
                alert("Please fill name, phone, and upload designs.");
                return;
            }

            btn.disabled = true;
            btn.innerText = "UPLOADING...";
            status.innerText = `â³ Sending ${selectedFiles.length} images...`;

            let imagesArray = [];
            for (let file of selectedFiles) {
                const base64 = await new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onload = () => resolve(reader.result.split(',')[1]);
                    reader.readAsDataURL(file);
                });
                imagesArray.push({ name: file.name, data: base64 });
            }

            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwlbk-H2Drqq4fDQHMcDo5c6f0C6IZpkKDJw19SptTcHSNOq_x8i6Z1HNQL-Hs8-Tqx/exec";

            try {
                await fetch(SCRIPT_URL, {
                    method: "POST",
                    mode: "no-cors",
                    body: JSON.stringify({
                        name: name,
                        phone: phone,
                        product: "T-Shirt",
                        details: `Material: ${currentMaterial}`,
                        notes: notes,
                        images: imagesArray
                    })
                });
                document.getElementById('studioPanel').classList.add('hidden');
                document.getElementById('successPanel').classList.remove('hidden');
                window.scrollTo(0,0);
            } catch (e) {
                alert("Upload failed. Check your internet connection.");
                btn.disabled = false;
                btn.innerText = "Confirm & Place Order";
            }
        }
    </script>
</body>
</html>
